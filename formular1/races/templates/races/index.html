{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Formula 1 Data</title>
    <link rel="stylesheet" href="{% static 'races/css/main.css' %}">
</head>
<body>
    <header>
        <h1>Datos Formula 1</h1>
    </header>

    <div class="search-panel">
        <div class="search-section">
            <h3>Filtros de Pilotos</h3>
            <div class="controls">
                <div class="control-group">
                    <label for="buscarPiloto">Buscar Piloto</label>
                    <input type="text" id="buscarPiloto" placeholder="Nombre del piloto..." onkeyup="filtrarPilotos()">
                </div>
                <div class="control-group">
                    <label for="filtroEquipo">Equipo</label>
                    <select id="filtroEquipo" onchange="filtrarPilotos()">
                        <option value="">Todos los equipos</option>
                        {% for piloto in pilotos %}
                            <option value="{{ piloto.equipo }}">{{ piloto.equipo }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="control-group">
                    <label for="filtroPais">País</label>
                    <select id="filtroPais" onchange="filtrarPilotos()">
                        <option value="">Todos los países</option>
                        {% for piloto in pilotos %}
                            <option value="{{ piloto.pais }}">{{ piloto.pais }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>

        <div class="search-section">
            <h3>Filtros de Sesiones</h3>
            <div class="controls">
                <div class="control-group">
                    <label for="buscarSesion">Buscar Sesión</label>
                    <input type="text" id="buscarSesion" placeholder="Nombre de la sesión..." onkeyup="filtrarSesiones()">
                </div>
                <div class="control-group">
                    <label for="filtroUbicacion">Ubicación</label>
                    <select id="filtroUbicacion" onchange="filtrarSesiones()">
                        <option value="">Todas las ubicaciones</option>
                        {% for sesion in sesiones %}
                            <option value="{{ sesion.ubicacion }}">{{ sesion.ubicacion }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="control-group">
                    <label for="filtroTipoSesion">Tipo de Sesión</label>
                    <select id="filtroTipoSesion" onchange="filtrarSesiones()">
                        <option value="">Todos los tipos</option>
                        {% for sesion in sesiones %}
                            <option value="{{ sesion.tipo_sesion }}">{{ sesion.tipo_sesion }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
    </div>

    <div class="data-section">
        <h2>Pilotos</h2>
        <div id="pilotosCount" class="results-count"></div>
        <div id="lista-pilotos">
            {% for piloto in pilotos %}
            <div class="piloto-card" 
                 data-nombre="{{ piloto.nombre_completo|lower }}" 
                 data-equipo="{{ piloto.equipo }}"
                 data-pais="{{ piloto.pais }}">
                <div class="stat-group">
                    <h3>{{ piloto.nombre_completo }}</h3>
                    <p class="stat-label">Equipo</p>
                    <p class="stat-value">{{ piloto.equipo }}</p>
                    <p class="stat-label">País</p>
                    <p class="stat-value">{{ piloto.pais }}</p>
                </div>
                <div class="stat-group">
                    <p class="stat-label">Número</p>
                    <p class="stat-value">#{{ piloto.numero_carro }}</p>
                    <p class="stat-label">Edad</p>
                    <p class="stat-value">{{ piloto.edad }} años</p>
                    <p class="stat-label">Puntos</p>
                    <p class="stat-value">{{ piloto.puntos }}</p>
                </div>
                <div class="stat-group">
                    <p class="stat-label">Victorias</p>
                    <p class="stat-value">{{ piloto.victorias }}</p>
                    <p class="stat-label">Podios</p>
                    <p class="stat-value">{{ piloto.podios }}</p>
                    <p class="stat-label">Poles</p>
                    <p class="stat-value">{{ piloto.poles }}</p>
                </div>
            </div>
            {% empty %}
            <p>No hay pilotos disponibles</p>
            {% endfor %}
        </div>
        <div class="pagination" id="paginacionPilotos">
            <button onclick="cambiarPaginaPilotos(-1)" id="anteriorPilotos">Anterior</button>
            <button onclick="cambiarPaginaPilotos(1)" id="siguientePilotos">Siguiente</button>
        </div>
        <div class="pagination-info" id="infoPaginacionPilotos"></div>
    </div>

    <div class="data-section">
        <h2>Sesiones</h2>
        <div id="sesionesCount" class="results-count"></div>
        <div id="lista-sesiones">
            {% for sesion in sesiones %}
            <div class="sesion-card" 
                 data-nombre="{{ sesion.nombre_sesion|lower }}" 
                 data-ubicacion="{{ sesion.ubicacion }}"
                 data-tipo="{{ sesion.tipo_sesion }}">
                <div class="stat-group">
                    <h3>{{ sesion.nombre_sesion }}</h3>
                    <p class="stat-label">Tipo</p>
                    <p class="stat-value">{{ sesion.tipo_sesion }}</p>
                    <p class="stat-label">Ubicación</p>
                    <p class="stat-value">{{ sesion.ubicacion }}</p>
                </div>
                <div class="stat-group">
                    <p class="stat-label">Fecha</p>
                    <p class="stat-value">{{ sesion.fecha_inicio|date:"d/m/Y H:i" }}</p>
                    <p class="stat-label">Duración</p>
                    <p class="stat-value">{{ sesion.numero_vueltas }} vueltas</p>
                    <p class="stat-label">Longitud Circuito</p>
                    <p class="stat-value">{{ sesion.longitud_circuito }} km</p>
                </div>
                <div class="stat-group">
                    <p class="stat-label">Clima</p>
                    <p class="stat-value">{{ sesion.clima }}</p>
                    <p class="stat-label">Temperatura</p>
                    <p class="stat-value">{{ sesion.temperatura }}°C</p>
                    <p class="stat-label">Viento</p>
                    <p class="stat-value">{{ sesion.velocidad_viento }} km/h {{ sesion.direccion_viento }}</p>
                </div>
            </div>
            {% empty %}
            <p>No hay sesiones disponibles</p>
            {% endfor %}
        </div>
        <div class="pagination" id="paginacionSesiones">
            <button onclick="cambiarPaginaSesiones(-1)" id="anteriorSesiones">Anterior</button>
            <button onclick="cambiarPaginaSesiones(1)" id="siguienteSesiones">Siguiente</button>
        </div>
        <div class="pagination-info" id="infoPaginacionSesiones"></div>
    </div>

    <script src="{% static 'races/js/main.js' %}"></script>
</body>
</html>